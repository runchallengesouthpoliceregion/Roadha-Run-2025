<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoadhaRun-South Police Region</title>
    <style>
/* Body styling with animated background */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-image: url('6184000488555530013.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    animation: backgroundAnimation 10s infinite alternate;
}

/* Container styling */
.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    background-color: rgba(255, 255, 255, 0.5);
    position: relative;
    padding: 20px;
    box-sizing: border-box;
}

/* Header styling */
.header {
    text-align: center;
    margin-bottom: 20px;
}

.header h1 {
    font-size: 2.5rem;
    color: #333;
    margin-bottom: 10px;
}

.header p {
    font-size: 1.2rem;
    color: #777;
}

/* Buttons styling */
.buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-top: 30px;
    position: relative;
    z-index: 2;
    width: 100%;
}

.button {
    padding: 12px 20px;
    font-size: 1rem;
    background-color: #564cc0;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    font-family: 'SameeAvasThaana', sans-serif;
    min-width: 150px;
    text-align: center;
}

.button:hover {
    background-color: #0056b3;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.button:active {
    background-color: #003f7f;
    transform: translateY(0);
}

/* Selected button styling */
.button.selected {
    background-color: #777;
}

.buttonF {
    padding: 12px 20px;
    font-size: 1rem;
    background-color: #106b50;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    font-family: 'SameeAvasThaana', sans-serif;
    min-width: 150px;
    text-align: center;
}

.buttonF:hover {
    background-color: #b38300;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

/* Iframe styling */
iframe {
    width: 100%;
    height: 900px;
    border: none;
    margin-top: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 2;
}

/* Logo styling */
.logo {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 120px;
    height: auto;
    animation: zoomInOut 3s infinite alternate;
    z-index: 1;
    cursor: pointer;
}

/* Logo zoom in and out animation */
@keyframes zoomInOut {
    0% {
        transform: scale(1);
    }
    100% {
        transform: scale(1.1);
    }
}

/* Custom font for the header */
@font-face {
    font-family: 'SameeAvasThaana';
    src: url('fonts/Samee_Avas_Thaana.ttf');
}

h1 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    text-align: center;
    color: #333;
    font-family: 'SameeAvasThaana', sans-serif;
}

/* Sidebar styling */
.sidebar {
    width: 250px;
    height: 100vh;
    background-image: url('LOGO JERSY.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: fixed;
    top: 0;
    left: -250px;
    transition: left 0.3s ease;
    z-index: 1000;
    opacity: 0.9;
    animation: zoomBackground 10s infinite alternate;
    overflow-y: auto;
}

.sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: -1;
}

/* Zoom in and out animation */
@keyframes zoomBackground {
    0% {
        background-size: 500% auto;
    }
    100% {
        background-size: 200% auto;
    }
}

.sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
    padding-top: 60px;
}

.sidebar ul li {
    padding: 12px;
    text-align: center;
}

.sidebar ul li a {
    color: white;
    text-decoration: none;
    font-size: 1rem;
    transition: color 0.3s ease;
    display: block;
}

.sidebar ul li a:hover {
    color: #564cc0;
}

/* Close button styling */
.close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    transition: color 0.3s ease;
    padding: 5px;
}

.close-btn:hover {
    color: #564cc0;
}

/* Open button styling */
.open-btn {
    position: fixed;
    top: 15px;
    left: 15px;
    background-color: #564cc0;
    color: white;
    border: none;
    padding: 8px 12px;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 1001;
    transition: background-color 0.3s ease, transform 0.2s ease;
    border-radius: 5px;
}

.open-btn:hover {
    background-color: #0056b3;
    transform: translateY(-2px);
}

/* Show sidebar when active */
.sidebar.active {
    left: 0;
}

/* Search bar styling */
.search-bar {
    padding: 10px;
    margin: 15px 10px;
    width: calc(100% - 40px);
    border: none;
    border-radius: 5px;
    font-size: 0.9rem;
}

/* Digital Bib styling */
.bib-container {
    display: none;
    text-align: center;
    background-color: #343247;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(50, 49, 49, 0.1);
    padding: 15px;
    margin: 15px 10px;
    position: relative;
    overflow: hidden;
}

.bib-container::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('LOGO JERSY.png');
    background-size: cover;
    background-position: center;
    opacity: 0.4;
    z-index: 1;
}

.bib-container > * {
    position: relative;
    z-index: 2;
}

.bib-header {
    font-size: 1rem;
    font-weight: bold;
    color: #f7f7f7;
    margin-bottom: 8px;
}

.bib-number {
    font-size: 3rem;
    font-weight: bold;
    color: #f7f7f7;
    margin: 20px 0;
}

.bib-nickname {
    font-size: 1.5rem;
    font-weight: bold;
    color: #f7f7f7;
    margin: 15px 0;
}

.bib-event {
    font-size: 1.2rem;
    color: #f7f7f7;
    margin: 15px 0;
    font-family: 'SameeAvasThaana', sans-serif;
}

.bib-logos {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 30px;
}

.bib-logos img {
    width: 40px;
    height: 40px;
}

/* Logo container styling */
.logo-container {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    margin-top: 15px;
    position: absolute;
    top: 15px;
    right: 15px;
}

/* WE BLUES text styling */
.we-blues {
    font-size: 1rem;
    font-weight: bold;
    color: #f7f7f7;
    margin-top: 5px;
    text-align: right;
}

/* SOUTH POLICE REGION text styling */
.south-police-region {
    font-size: 0.8rem;
    color: #f7f7f7;
    text-align: right;
    position: absolute;
    bottom: 8px;
    right: 15px;
}

/* Admin buttons styling */
.admin-buttons {
    display: none;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
    width: 100%;
}

.admin-buttons button {
    padding: 12px 20px;
    font-size: 1rem;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    min-width: 150px;
}

.admin-buttons button:hover {
    background-color: #218838;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.admin-buttons button:active {
    background-color: #1e7e34;
    transform: translateY(0);
}

/* Loading overlay styling */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    display: none;
}

.loading-text {
    color: white;
    font-size: 1.8rem;
    margin-bottom: 20px;
    font-family: 'SameeAvasThaana', sans-serif;
    text-align: center;
    padding: 0 20px;
}

/* Progress bar container */
.progress-container {
    width: 80%;
    max-width: 500px;
    height: 25px;
    background-color: #333;
    border-radius: 15px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* Progress bar */
.progress-bar {
    height: 100%;
    width: 0;
    background: linear-gradient(90deg, #564cc0, #0056b3);
    border-radius: 15px;
    transition: width 0.3s ease;
    position: relative;
    overflow: hidden;
}

/* Animated stripes for progress bar */
.progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.15) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.15) 75%,
        transparent 75%,
        transparent
    );
    background-size: 30px 30px;
    animation: progressStripes 1s linear infinite;
}

/* Running Person Animation Styles */
.running-person {
    position: absolute;
    right: -40px;
    top: 50%;
    transform: translateY(-50%);
    width: 30px;
    height: 30px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ffffff"><path d="M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    animation: runAnimation 1.5s steps(8) infinite, moveForward 3s linear infinite;
    z-index: 2;
}

/* Keyframes for running animation */
@keyframes runAnimation {
    0% { background-position: 0 0; }
    100% { background-position: -240px 0; }
}

@keyframes moveForward {
    0% { right: -40px; }
    100% { right: calc(100% + 10px); }
}

/* Progress bar animations */
@keyframes progressStripes {
    0% { background-position: 0 0; }
    100% { background-position: 30px 30px; }
}

/* Countdown Timer Styles - Responsive */
.countdown-container {
    background: linear-gradient(135deg, #4b4869, #0056b3);
    border-radius: 15px;
    padding: 15px;
    margin: 20px 10px;
    text-align: center;
    color: white;
    width: calc(100% - 40px);
    max-width: 600px;
    position: relative;
    box-sizing: border-box;
}

.countdown-header h2 {
    margin: 0 0 10px 0;
    font-size: 1.5rem;
}

.countdown-timer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 5px;
    margin: 10px 0;
}

.countdown-item {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
    padding: 8px 10px;
    min-width: 50px;
    flex: 1;
    max-width: 70px;
}

.countdown-value {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 5px;
}

.countdown-label {
    font-size: 0.7rem;
    opacity: 0.8;
}

.countdown-separator {
    font-size: 1.2rem;
    margin: 0 2px;
    line-height: 1;
}

.countdown-admin-btn {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    margin-top: 10px;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 0.9rem;
}

.admin-panel {
    display: none;
    background: rgba(0, 0, 0, 0.7);
    padding: 10px;
    border-radius: 8px;
    margin-top: 10px;
}

.admin-panel h3 {
    margin-top: 0;
    font-size: 1.1rem;
}

.admin-panel input {
    padding: 6px;
    margin: 8px 0;
    width: 100%;
    border-radius: 4px;
    border: none;
    font-size: 0.9rem;
}

.admin-panel button {
    background: #564cc0;
    color: white;
    border: none;
    padding: 6px 12px;
    margin: 3px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
}

/* Media Queries for responsive design */
@media (max-width: 768px) {
    .header h1 {
        font-size: 2rem;
    }
    
    .button, .buttonF {
        padding: 10px 15px;
        font-size: 0.9rem;
        min-width: 120px;
    }
    
    .logo {
        width: 100px;
    }
    
    iframe {
        height: 700px;
    }
}

@media (max-width: 480px) {
    .header h1 {
        font-size: 1.8rem;
    }
    
    .countdown-header h2 {
        font-size: 1.3rem;
    }
    
    .countdown-item {
        min-width: 40px;
        padding: 6px 8px;
    }
    
    .countdown-value {
        font-size: 1.2rem;
    }
    
    .countdown-label {
        font-size: 0.6rem;
    }
    
    .countdown-separator {
        font-size: 1rem;
    }
    
    .bib-number {
        font-size: 2.5rem;
    }
    
    .bib-nickname {
        font-size: 1.2rem;
    }
    
    .bib-event {
        font-size: 1rem;
    }
}

@media (max-width: 360px) {
    .buttons, .admin-buttons {
        gap: 10px;
    }
    
    .button, .buttonF {
        min-width: 100px;
        padding: 8px 12px;
        font-size: 0.8rem;
    }
    
    .countdown-timer {
        gap: 3px;
    }
    
    .countdown-item {
        min-width: 35px;
        padding: 5px;
    }
    
    .countdown-value {
        font-size: 1rem;
    }
    
    .sidebar {
        width: 220px;
    }
}
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-text">qniDOl</div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <div class="percentage" id="percentage">0%</div>
                <div class="running-person"></div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <button class="close-btn" id="closeBtn">×</button>
        <ul>
            <li><a href="#" onclick="loadHome()">Home</a></li>
            <li><a href="#" id="adminButton">Admin</a></li>
            <li>
                <button class="button" onclick="loadContent('roadha_run_1446.html')">udiwAvaQ</button>
            </li>
        </ul>

        <!-- Digital BIB Finder Text -->
        <h3 style="text-align: center; font-weight: bold; color: white; margin: 20px 0 10px 0;">Digital BIB Finder</h3>

        <!-- Search bar -->
        <input type="text" class="search-bar" id="searchBar" placeholder="Enter contact number">

        <!-- Digital Bib Display inside sidebar -->
        <div class="bib-container" id="sidebarBibContainer">
            <div class="bib-header">DIGITAL BIB</div>
            <div class="bib-number" id="sidebarBibNumber"></div>
            <div class="bib-nickname" id="sidebarBibNickname"></div>
            <div class="bib-event">1446 qnar adOr</div>
            <div class="bib-logos">
                <div class="logo-container">
                    <img src="LOGO JERSY.png" alt="Logo 1">
                    <div class="we-blues">WE BLUES</div>
                </div>
            </div>
            <div class="south-police-region">SOUTH POLICE REGION</div>
        </div>
    </div>

    <!-- Open Sidebar Button -->
    <button class="open-btn" id="openBtn">☰</button>

    <div class="container">
        <!-- Logo on the right side -->
        <img src="LOGO JERSY.png" alt="Logo" class="logo" id="logo">

        <!-- Header for the screenshot page -->
        <div class="header" id="screenshotHeader" style="display: none;">
            <h1>qgol qnar adOr</h1>
        </div>

        <!-- Admin buttons container -->
        <div class="admin-buttons" id="adminButtons">
            <button class="button" onclick="loadContent('registerdata.html')">raTqsijer</button>
            <button class="button" onclick="loadContent('entryData.html')">qnar IliweD</button>
            <button class="button" id="dailyEntryButton" onclick="selectButton(this); loadContent('entrys.html')">IrqTqnew</button>
            <button class="button" onclick="loadContent('imageEnter.html')" style="display: none;">IrqTqnnew OTof</button>
        </div>

        <!-- Countdown Timer with Admin Controls -->
        <div class="countdown-container" id="countdownContainer">
            <div class="countdown-header">
                <h2>RoadhaRun 1446 Countdown</h2>
                <div class="countdown-subtitle" id="countdownMessage"></div>
            </div>
            
            <div class="countdown-timer">
                <div class="countdown-item">
                    <div class="countdown-value" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-separator">:</div>
                <div class="countdown-item">
                    <div class="countdown-value" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-separator">:</div>
                <div class="countdown-item">
                    <div class="countdown-value" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-separator">:</div>
                <div class="countdown-item">
                    <div class="countdown-value" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>
            
            <!-- Simple Admin Button -->
            <button class="countdown-admin-btn" id="countdownAdminBtn">Set Countdown</button>
            
            <!-- Admin Panel (hidden by default) -->
            <div class="admin-panel" id="countdownAdminPanel">
                <h3>Set Countdown Date</h3>
                <input type="datetime-local" id="countdownDateTime">
                <button onclick="saveCountdownDate()">Save</button>
                <button onclick="hideAdminPanel()">Cancel</button>
            </div>
        </div>

        <!-- Buttons container -->
        <div class="buttons" id="buttonsContainer">
            <button class="button" id="registerButton" onclick="selectButton(this); loadContent('Registers.html')">raTqsijer - qbib</button>
            <button class="button" id="runningLogButton" onclick="showLoading(); selectButton(this); loadRunningLog()">qgol qninar</button>
            <button class="buttonF" id="runningLogButton" onclick="selectButton(this); loadContent('Feedback.html')">qkebqDIf</button>
            <button class="button" id="testButton" style="display: none;">qgol OTof</button>
        </div>

        <iframe id="iframeContent" src="" style="display: none;"></iframe>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-database.js"></script>

    <script>
       // Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyANLfgYIxslDsHwpJhShQQFsevltUPBEbY",
    authDomain: "run-challenge-3cd7b.firebaseapp.com",
    databaseURL: "https://run-challenge-3cd7b-default-rtdb.firebaseio.com",
    projectId: "run-challenge-3cd7b",
    storageBucket: "run-challenge-3cd7b.firebasestorage.app",
    messagingSenderId: "1009826150691",
    appId: "1:1009826150691:web:2fe9bed895b701a75f3496",
    measurementId: "G-TJYBERMRRT"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// DOM Elements
const sidebar = document.getElementById('sidebar');
const openBtn = document.getElementById('openBtn');
const closeBtn = document.getElementById('closeBtn');
const adminButton = document.getElementById('adminButton');
const adminButtons = document.getElementById('adminButtons');
const buttonsContainer = document.getElementById('buttonsContainer');
const logo = document.getElementById('logo');
const iframeContent = document.getElementById('iframeContent');
const searchBar = document.getElementById('searchBar');
const sidebarBibContainer = document.getElementById('sidebarBibContainer');
const loadingOverlay = document.getElementById('loadingOverlay');
const progressBar = document.getElementById('progressBar');
const percentageText = document.getElementById('percentage');
const countdownContainer = document.getElementById('countdownContainer');

// Sidebar functionality
openBtn.addEventListener('click', () => {
    sidebar.classList.add('active');
});

closeBtn.addEventListener('click', () => {
    sidebar.classList.remove('active');
});

// Admin button functionality
adminButton.addEventListener('click', () => {
    const password = prompt('Enter password:');
    if (password === '8555') {
        adminButtons.style.display = 'flex';
        buttonsContainer.style.display = 'none';
        logo.style.display = 'none';
        countdownContainer.style.display = 'none';
    } else {
        alert('Incorrect password!');
    }
});

// Function to load content into iframe
function loadContent(page) {
    iframeContent.style.display = 'block';
    iframeContent.src = page;
    countdownContainer.style.display = 'none';
}

// Function to show loading animation
function showLoading() {
    loadingOverlay.style.display = 'flex';
    let progress = 0;
    const interval = setInterval(() => {
        progress += Math.random() * 10;
        if (progress > 100) progress = 100;
        progressBar.style.width = `${progress}%`;
        percentageText.textContent = `${Math.floor(progress)}%`;
        
        if (progress === 100) {
            clearInterval(interval);
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 500);
        }
    }, 300);
}

// Function to load running log with progress animation
function loadRunningLog() {
    showLoading();
    setTimeout(() => {
        loadContent('filter.html');
    }, 2500); // Match this with the progress animation duration
}

// Function to select button
function selectButton(selectedButton) {
    const buttons = document.querySelectorAll('.button');
    buttons.forEach(button => {
        button.classList.remove('selected');
    });
    selectedButton.classList.add('selected');
    countdownContainer.style.display = 'none';
}

// Function to hide all buttons
function hideAllButtons() {
    buttonsContainer.style.display = 'none';
}

// Function to load home page
function loadHome() {
    adminButtons.style.display = 'none';
    buttonsContainer.style.display = 'flex';
    logo.style.display = 'block';
    iframeContent.style.display = 'none';
    countdownContainer.style.display = 'block';
}

// Search functionality for Digital BIB
searchBar.addEventListener('input', () => {
    const contactNumber = searchBar.value;
    if (contactNumber) {
        database.ref('participants').orderByChild('contact').equalTo(contactNumber).once('value', snapshot => {
            if (snapshot.exists()) {
                const data = Object.values(snapshot.val())[0];
                displaySidebarBib(data);
            } else {
                hideBib();
            }
        });
    } else {
        hideBib();
    }
});

// Function to display Bib information inside sidebar
function displaySidebarBib(data) {
    const sidebarBibNumber = document.getElementById('sidebarBibNumber');
    const sidebarBibNickname = document.getElementById('sidebarBibNickname');

    sidebarBibNumber.textContent = data.bibNumber || 'N/A';
    sidebarBibNickname.textContent = data.nickName || 'N/A';
    sidebarBibContainer.style.display = 'block';
}

// Function to hide Bib information
function hideBib() {
    sidebarBibContainer.style.display = 'none';
}

// Logo click event for image upload
logo.addEventListener('click', () => {
    hideAllButtons();
    logo.style.animation = 'zoomInOut 1s forwards';
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'image/*';
    fileInput.onchange = function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
            const imageBase64 = e.target.result;
            const text = prompt('Enter image description:');
            const contactNumber = prompt('Enter contact number:');
            if (text && contactNumber) {
                saveDataToFirebase(imageBase64, text, contactNumber);
            } else {
                alert('Please enter both image description and contact number.');
            }
        };
        reader.readAsDataURL(file);
    };
    fileInput.click();
});

// Function to save data to Firebase
function saveDataToFirebase(imageBase64, text, contactNumber) {
    const newDataRef = database.ref('images').push();
    newDataRef.set({
        image: imageBase64,
        text: text,
        contact: contactNumber,
        timestamp: firebase.database.ServerValue.TIMESTAMP
    })
    .then(() => {
        alert('Data saved successfully!');
        logo.style.animation = '';
    })
    .catch((error) => {
        console.error('Error saving data:', error);
        alert('Error saving data. Please try again.');
    });
}

// Initialize the application
function init() {
    // Check if there's a hash in the URL to load specific content
    if (window.location.hash) {
        const page = window.location.hash.substring(1);
        loadContent(page + '.html');
    }
}

// Run initialization when DOM is loaded
document.addEventListener('DOMContentLoaded', init);

// Create running person animation dynamically
function createRunningAnimation() {
    const progressBar = document.getElementById('progressBar');
    const runner = document.createElement('div');
    runner.className = 'running-person';
    progressBar.appendChild(runner);
}

// Initialize running animation
createRunningAnimation();
    </script>

    <script>
   // Countdown Timer with Simple Admin Controls
function initializeCountdown() {
    // Check if countdown date exists in Firebase
    const countdownRef = database.ref('countdown');
    
    countdownRef.on('value', (snapshot) => {
        const countdownData = snapshot.val();
        
        if (countdownData && countdownData.endDate) {
            updateCountdown(new Date(countdownData.endDate));
        } else {
            // Set default countdown (7 days from now)
            const defaultDate = new Date();
            defaultDate.setDate(defaultDate.getDate() + 7);
            countdownRef.set({
                endDate: defaultDate.toISOString()
            });
        }
    });
    
    // Admin button click handler
    document.getElementById('countdownAdminBtn').addEventListener('click', () => {
        const password = prompt("Enter admin password:");
        if (password === "8555") {
            showAdminPanel();
        } else {
            alert("Incorrect password!");
        }
    });
}

function updateCountdown(endDate) {
    const now = new Date();
    const diff = endDate - now;
    
    if (diff <= 0) {
        document.getElementById('countdownMessage').textContent = "The event has started!";
        return;
    }
    
    // Calculate time units
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    // Update display
    document.getElementById('days').textContent = days.toString().padStart(2, '0');
    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
    
    // Update message
    if (days > 0) {
        document.getElementById('countdownMessage').textContent = `${days} days until RoadhaRun!`;
    } else if (hours > 0) {
        document.getElementById('countdownMessage').textContent = `${hours} hours remaining!`;
    } else {
        document.getElementById('countdownMessage').textContent = "Less than one hour to go!";
    }
    
    // Update every second
    setTimeout(() => updateCountdown(endDate), 1000);
}

function showAdminPanel() {
    const panel = document.getElementById('countdownAdminPanel');
    panel.style.display = 'block';
    
    // Load current date if exists
    database.ref('countdown').once('value').then((snapshot) => {
        const countdownData = snapshot.val();
        if (countdownData && countdownData.endDate) {
            const date = new Date(countdownData.endDate);
            // Format for datetime-local input
            const formattedDate = date.toISOString().slice(0, 16);
            document.getElementById('countdownDateTime').value = formattedDate;
        }
    });
}

function hideAdminPanel() {
    document.getElementById('countdownAdminPanel').style.display = 'none';
}

function saveCountdownDate() {
    const dateTimeInput = document.getElementById('countdownDateTime').value;
    
    if (!dateTimeInput) {
        alert("Please select a date and time");
        return;
    }
    
    // Convert to Date object
    const selectedDate = new Date(dateTimeInput);
    
    // Save to Firebase
    database.ref('countdown').set({
        endDate: selectedDate.toISOString()
    }).then(() => {
        alert("Countdown date saved successfully!");
        hideAdminPanel();
    }).catch((error) => {
        alert("Error saving date: " + error.message);
    });
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', initializeCountdown);
    </script>
</body>
</html>